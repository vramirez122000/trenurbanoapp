delete from ref.subroute_new where route = 'T3' and direction = 'SAGRADO_CORAZON';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.110826 18.464775,-66.110859 18.464889,-66.110911 18.464964,-66.111064 18.464957,-66.111189 18.464899,-66.111203 18.464818,-66.111038 18.464132,-66.110803 18.463981,-66.109968 18.463934,-66.109457 18.463918,-66.107036 18.463785,-66.106911 18.463822,-66.10672 18.464123,-66.106248 18.464883,-66.106116 18.465023,-66.105964 18.465138,-66.105866 18.46519,-66.105776 18.465197,-66.105683 18.465184,-66.105168 18.465044,-66.103376 18.464563,-66.102764 18.464388,-66.102404 18.464273,-66.102166 18.464234,-66.101448 18.464185,-66.100322 18.464102,-66.09942 18.464045,-66.098896 18.464032,-66.098372 18.464004,-66.097065 18.463908,-66.095791 18.463813,-66.094489 18.463716,-66.093919 18.463703,-66.093103 18.463393,-66.092542 18.463162,-66.091061 18.462581,-66.090446 18.462351,-66.08955 18.461999,-66.089064 18.461835,-66.088927 18.461809,-66.088746 18.461802,-66.08855 18.46182,-66.088299 18.461853,-66.088026 18.461893,-66.087849 18.46188,-66.087747 18.461818,-66.087631 18.46171,-66.087494 18.461514,-66.08742 18.461305,-66.08737 18.461122,-66.087339 18.460859,-66.087344 18.460227,-66.087319 18.459888,-66.086941 18.458503,-66.086797 18.457968,-66.086669 18.45774,-66.086465 18.457536,-66.08594 18.457109,-66.085634 18.456896,-66.081371 18.454951,-66.080363 18.454443,-66.078295 18.453091,-66.077335 18.452613,-66.075873 18.451702,-66.074456 18.450777,-66.068709 18.446362,-66.066119 18.444375,-66.064713 18.443292,-66.063824 18.442593,-66.063168 18.442051,-66.062543 18.441494,-66.061898 18.440807,-66.061165 18.439966,-66.059843 18.438426,-66.059643 18.438126,-66.059475 18.437726,-66.05941 18.437366,-66.059375 18.436897,-66.059342 18.436203,-66.059303 18.43553)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'T3','SAGRADO_CORAZON', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_new where route = 'T3' and direction = 'SAN_JUAN';with line_tmp as (select ST_Transform(ST_GeomFromEWKT('SRID=4326;LINESTRING(-66.06043 18.435675,-66.060356 18.435957,-66.06029 18.436004,-66.059452 18.436012,-66.059367 18.43603,-66.059298 18.436113,-66.059279 18.436218,-66.059302 18.436903,-66.059387 18.437746,-66.059462 18.437939,-66.059561 18.438141,-66.059788 18.438475,-66.060103 18.438894,-66.061107 18.440002,-66.061834 18.440847,-66.062488 18.441543,-66.063118 18.442102,-66.063755 18.44264,-66.064614 18.443283,-66.065788 18.444213,-66.068984 18.446677,-66.074427 18.450834,-66.075842 18.451756,-66.077303 18.452647,-66.078296 18.453146,-66.080329 18.454479,-66.081309 18.454988,-66.085322 18.456819,-66.085486 18.456926,-66.085641 18.457051,-66.085798 18.457198,-66.085993 18.457468,-66.086099 18.457851,-66.086249 18.458568,-66.086481 18.460045,-66.0866 18.460384,-66.086704 18.460662,-66.086877 18.460974,-66.086955 18.461044,-66.087114 18.461144,-66.08768 18.461329,-66.087869 18.461432,-66.08796 18.46155,-66.08806 18.461617,-66.088242 18.461678,-66.088402 18.461784,-66.088576 18.461843,-66.088753 18.461833,-66.088922 18.46184,-66.089049 18.461863,-66.089652 18.462081,-66.090258 18.46231,-66.090593 18.462444,-66.091313 18.462729,-66.091949 18.462982,-66.092909 18.463352,-66.093899 18.463739,-66.094074 18.463748,-66.094481 18.463747,-66.095638 18.463835,-66.096875 18.463919,-66.098356 18.46403,-66.098893 18.46406,-66.09942 18.464075,-66.100157 18.46413,-66.101449 18.464221,-66.102166 18.464273,-66.102397 18.464309,-66.102983 18.464496,-66.104493 18.464891,-66.105672 18.465215,-66.10599 18.465264,-66.1062 18.465284,-66.106531 18.465233,-66.106751 18.465253,-66.107099 18.465307,-66.107675 18.465238,-66.107745 18.465149,-66.107807 18.463948,-66.107857 18.463898,-66.107933 18.463894,-66.108585 18.463941,-66.110095 18.46402,-66.11039 18.464034,-66.11047 18.464098,-66.110555 18.464285,-66.110697 18.464367,-66.110741 18.464456,-66.110822 18.464748)'), 32161) geom) insert into ref.subroute_new(route, direction, geom) select 'T3','SAN_JUAN', ST_AddMeasure(line_tmp.geom, 0, ST_Length(line_tmp.geom)) from line_tmp;
delete from ref.subroute_stop where route = 'T3' and direction = 'SAN_JUAN'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (36, 0, 'T3', 'SAN_JUAN'),(1573, 1, 'T3', 'SAN_JUAN'),(1572, 2, 'T3', 'SAN_JUAN'),(1575, 3, 'T3', 'SAN_JUAN'),(1603, 4, 'T3', 'SAN_JUAN'),(1604, 5, 'T3', 'SAN_JUAN'),(259, 6, 'T3', 'SAN_JUAN'),(260, 7, 'T3', 'SAN_JUAN'),(261, 8, 'T3', 'SAN_JUAN'),(262, 9, 'T3', 'SAN_JUAN'),(263, 10, 'T3', 'SAN_JUAN'),(264, 11, 'T3', 'SAN_JUAN'),(265, 12, 'T3', 'SAN_JUAN'),(266, 13, 'T3', 'SAN_JUAN'),(267, 14, 'T3', 'SAN_JUAN'),(268, 15, 'T3', 'SAN_JUAN'),(269, 16, 'T3', 'SAN_JUAN'),(270, 17, 'T3', 'SAN_JUAN'),(271, 18, 'T3', 'SAN_JUAN'),(272, 19, 'T3', 'SAN_JUAN'),(274, 20, 'T3', 'SAN_JUAN'),(276, 21, 'T3', 'SAN_JUAN'),(277, 22, 'T3', 'SAN_JUAN'),(278, 23, 'T3', 'SAN_JUAN'),(1597, 24, 'T3', 'SAN_JUAN');
delete from ref.subroute_stop where route = 'T3' and direction = 'SAGRADO_CORAZON'; insert into ref.subroute_stop (stop, stop_order, route, direction) values (1597, 0, 'T3', 'SAGRADO_CORAZON'),(279, 1, 'T3', 'SAGRADO_CORAZON'),(281, 2, 'T3', 'SAGRADO_CORAZON'),(282, 3, 'T3', 'SAGRADO_CORAZON'),(283, 4, 'T3', 'SAGRADO_CORAZON'),(284, 5, 'T3', 'SAGRADO_CORAZON'),(285, 6, 'T3', 'SAGRADO_CORAZON'),(286, 7, 'T3', 'SAGRADO_CORAZON'),(287, 8, 'T3', 'SAGRADO_CORAZON'),(288, 9, 'T3', 'SAGRADO_CORAZON'),(289, 10, 'T3', 'SAGRADO_CORAZON'),(290, 11, 'T3', 'SAGRADO_CORAZON'),(291, 12, 'T3', 'SAGRADO_CORAZON'),(44, 13, 'T3', 'SAGRADO_CORAZON'),(45, 14, 'T3', 'SAGRADO_CORAZON'),(46, 15, 'T3', 'SAGRADO_CORAZON'),(47, 16, 'T3', 'SAGRADO_CORAZON'),(48, 17, 'T3', 'SAGRADO_CORAZON'),(49, 18, 'T3', 'SAGRADO_CORAZON'),(50, 19, 'T3', 'SAGRADO_CORAZON'),(51, 20, 'T3', 'SAGRADO_CORAZON'),(52, 21, 'T3', 'SAGRADO_CORAZON'),(53, 22, 'T3', 'SAGRADO_CORAZON');
